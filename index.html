<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>M4S</title>
<style>
  /* Dark theme and layout */
  body {
    background-color: #000000f1;
    color: #ffffff;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }
  header {
    text-align: center;
  }
  header h1 {
    font-size: 36px;
    margin: 20px 0;
    color: #ffffff;
    letter-spacing: 2px;
  }
  #menu {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    height: 70vh;
    padding: 20px;
    position: relative; /* keep above canvas */
    z-index: 1;
  }
  .menu-item {
    width: 180px;
    height: 120px;
    background: #1f1f1f;
    margin: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.3s;
    z-index: 1;
  }
  .menu-item:hover {
    background: #333;
  }
  section {
    display: none;
    padding: 20px;
    position: relative;
    z-index: 1;
  }
  h2 {
    margin-top: 0;
  }
  .back-button {
    background: none;
    border: none;
    color: #00aaff;
    font-size: 16px;
    cursor: pointer;
    margin-bottom: 15px;
    z-index: 1;
  }
  input[type="text"] {
    width: 100%;
    padding: 8px;
    margin: 10px 0 15px;
    background: #333;
    border: 1px solid #555;
    color: #fff;
    border-radius: 4px;
    z-index: 1;
  }
  #imagesContainer, #videosContainer, #audioContainer {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  .media-item {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #1f1f1f;
    border: 1px solid #333;
    border-radius: 5px;
    padding: 5px;
    margin: 5px;
    width: 180px;
    cursor: pointer;
    z-index: 1;
  }
  .media-item:hover {
    border-color: #555;
  }
  .media-item img,
  .media-item video {
    max-width: 100%;
    max-height: 150px;
    border-radius: 3px;
  }
  .media-item audio {
    width: 100%;
    margin-top: 5px;
  }
  .media-title {
    text-align: center;
    font-size: 14px;
    margin-top: 5px;
    word-break: break-word;
  }
  /* Modal styles */
  #modal {
    display: none;
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
    z-index: 10000;
  }
  #modal .content {
    position: relative;
    max-width: 90%;
    max-height: 90%;
    background: #000;
    padding: 10px;
    border-radius: 8px;
  }
  #modal img, #modal video {
    display: block;
    max-width: 100%;
    max-height: 80vh;
    margin: auto;
  }
  #modal .controls {
    margin-top: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #modal button, #modal a {
    background: #1f1f1f;
    border: none;
    color: #fff;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
  }
  #modal .close {
    position: absolute;
    top: 8px; right: 8px;
    font-size: 18px;
    background: none;
  }
  #modal .like {
    font-size: 18px;
    color: #ff4b5c;
  }
  footer {
    position: fixed;
    bottom: 0;
    width: 100%;
    background-color: #121212;
    color: white;
    text-align: center;
    padding: 10px 0;
    font-size: 14px;
    z-index: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
  }
  /* Canvas full-screen background */
  #bgCanvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 0;
    width: 100%;
    height: 100%;
  }
</style>
</head>
<body>
  <!-- Background canvas -->
  <canvas id="bgCanvas"></canvas>

  <header>
    <h1>M4S</h1>
  </header>

  <div id="menu">
    <div class="menu-item" data-section="imagesSection">Images</div>
    <div class="menu-item" data-section="videosSection">Videos</div>
    <div class="menu-item" data-section="audioSection">Audio</div>
    <div class="menu-item" data-section="textSection">Text</div>
  </div>

  <!-- Images Section -->
  <section id="imagesSection">
    <button class="back-button" data-back>← Back</button>
    <h2>Images</h2>
    <input type="text" id="searchImages" placeholder="Search images...">
    <div id="imagesContainer"></div>
  </section>

  <!-- Videos Section -->
  <section id="videosSection">
    <button class="back-button" data-back>← Back</button>
    <h2>Videos</h2>
    <input type="text" id="searchVideos" placeholder="Search videos...">
    <div id="videosContainer"></div>
  </section>

  <!-- Audio Section -->
  <section id="audioSection">
    <button class="back-button" data-back>← Back</button>
    <h2>Audio</h2>
    <input type="text" id="searchAudio" placeholder="Search audio...">
    <div id="audioContainer"></div>
  </section>

  <!-- Text Section -->
  <section id="textSection">
    <button class="back-button" data-back>← Back</button>
    <h2>Text Files</h2>
    <input type="text" id="searchText" placeholder="Search text files...">
    <div id="textList"></div>
    <div id="textViewer" style="display:none;">
      <pre id="textContent"></pre>
      <button id="copyText">Copy Text</button>
      <a id="downloadText" href="#" download>Download File</a>
    </div>
  </section>

  <!-- Modal for preview -->
  <div id="modal">
    <div class="content">
      <button class="close">✕</button>
      <div id="previewContainer"></div>
      <div class="controls">
        <button id="likeBtn" class="like">♡ Like</button>
        <a id="downloadBtn" href="#" download>Download</a>
      </div>
    </div>
  </div>

<script>
// Canvas background
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  drawRandomLines();
}
window.addEventListener('resize', resizeCanvas);
function drawRandomLines() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const lines = 30;
  for (let i = 0; i < lines; i++) {
    const points = [];
    const pointCount = 5 + Math.floor(Math.random() * 5);
    for (let j = 0; j < pointCount; j++) {
      points.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height
      });
    }
    ctx.beginPath();
    ctx.moveTo(points[0].x, points[0].y);
    for (let k = 1; k < points.length; k++) {
      ctx.lineTo(points[k].x, points[k].y);
    }
    ctx.strokeStyle = 'rgba(255,255,255,0.1)';
    ctx.lineWidth = 1 + Math.random();
    ctx.stroke();
  }
}
resizeCanvas();

// Configuration
const githubUser = 'mahmoudelsheikh7';
const repoName   = 'M4S';
const branch     = 'main';

// State
let imagesList = [], videosList = [], audioList = [], textList = [];
let imagesLoaded=false, videosLoaded=false, audioLoaded=false, textLoaded=false;

// Navigation & back
function showMenu(){
  document.getElementById('menu').style.display='flex';
  document.querySelectorAll('section').forEach(s=>s.style.display='none');
  document.getElementById('textViewer').style.display='none';
}
function showSection(id){
  document.getElementById('menu').style.display='none';
  document.querySelectorAll('section').forEach(s=>{
    s.style.display = s.id===id?'block':'none';
  });
  if(id==='imagesSection' && !imagesLoaded) loadImages();
  if(id==='videosSection' && !videosLoaded) loadVideos();
  if(id==='audioSection'  && !audioLoaded)  loadAudio();
  if(id==='textSection'   && !textLoaded)   loadText();
}
document.querySelectorAll('.menu-item').forEach(i=>i.addEventListener('click',()=>showSection(i.dataset.section)));
document.querySelectorAll('.back-button').forEach(b=>b.addEventListener('click',showMenu));

// Load & display images
function loadImages(){
  fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/images?ref=${branch}`)
    .then(r=>r.json())
    .then(data=>{
      imagesList = data.filter(f=>f.type==='file' && /\.(jpe?g|png|gif|webp)$/i.test(f.name));
      displayImages(imagesList);
      imagesLoaded = true;
    });
}
function displayImages(list){
  const c = document.getElementById('imagesContainer');
  c.innerHTML='';
  list.forEach(item=>{
    const d = document.createElement('div');
    d.className='media-item';
    d.addEventListener('click',()=>openModal('image',item));
    const img = document.createElement('img');
    img.src = encodeURI(item.download_url);
    img.alt = item.name;
    d.appendChild(img);
    const title = document.createElement('div');
    title.className='media-title';
    title.textContent = item.name;
    d.appendChild(title);
    c.appendChild(d);
  });
}
document.getElementById('searchImages').addEventListener('input',e=>{
  const q=e.target.value.toLowerCase();
  displayImages(imagesList.filter(i=>i.name.toLowerCase().includes(q)));
});

// Load & display videos
function loadVideos(){
  fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/videos?ref=${branch}`)
    .then(r=>r.json())
    .then(data=>{
      videosList = data.filter(f=>f.type==='file' && /\.(mp4|webm|ogg)$/i.test(f.name));
      displayVideos(videosList);
      videosLoaded=true;
    });
}
function displayVideos(list){
  const c=document.getElementById('videosContainer');
  c.innerHTML='';
  list.forEach(item=>{
    const d=document.createElement('div');
    d.className='media-item';
    d.addEventListener('click',()=>openModal('video',item));
    const vid=document.createElement('video');
    vid.src = encodeURI(item.download_url);
    vid.muted=true;
    vid.preload='none';
    d.appendChild(vid);
    const title=document.createElement('div');
    title.className='media-title';
    title.textContent=item.name;
    d.appendChild(title);
    c.appendChild(d);
  });
}
document.getElementById('searchVideos').addEventListener('input',e=>{
  const q=e.target.value.toLowerCase();
  displayVideos(videosList.filter(v=>v.name.toLowerCase().includes(q)));
});

// Load & display audio
function loadAudio(){
  fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/audio?ref=${branch}`)
    .then(r=>r.json())
    .then(data=>{
      audioList=data.filter(f=>f.type==='file');
      displayAudio(audioList);
      audioLoaded=true;
    });
}
function displayAudio(list){
  const c=document.getElementById('audioContainer');
  c.innerHTML='';
  list.forEach(item=>{
    const d=document.createElement('div');
    d.className='media-item';
    const a=document.createElement('audio');
    a.src=encodeURI(item.download_url);
    a.controls=true;
    a.preload='none';
    d.appendChild(a);
    const title=document.createElement('div');
    title.className='media-title';
    title.textContent=item.name;
    d.appendChild(title);
    c.appendChild(d);
  });
}
document.getElementById('searchAudio').addEventListener('input',e=>{
  const q=e.target.value.toLowerCase();
  displayAudio(audioList.filter(a=>a.name.toLowerCase().includes(q)));
});

// Load & display text files
function loadText(){
  fetch(`https://api.github.com/repos/${githubUser}/${repoName}/contents/text?ref=${branch}`)
    .then(r=>r.json())
    .then(data=>{
      textList=data.filter(f=>f.type==='file');
      displayTextList(textList);
      textLoaded=true;
    });
}
function displayTextList(list){
  const c=document.getElementById('textList');
  c.innerHTML='';
  list.forEach(item=>{
    const d=document.createElement('div');
    d.className='media-item';
    d.addEventListener('click',()=>viewText(item));
    const title=document.createElement('div');
    title.className='media-title';
    title.textContent=item.name;
    d.appendChild(title);
    c.appendChild(d);
  });
}
document.getElementById('searchText').addEventListener('input',e=>{
  const q=e.target.value.toLowerCase();
  displayTextList(textList.filter(t=>t.name.toLowerCase().includes(q)));
});
function viewText(item){
  fetch(item.download_url).then(r=>r.text()).then(txt=>{
    document.getElementById('textContent').textContent=txt;
    const dl=document.getElementById('downloadText');
    dl.href=item.download_url; dl.download=item.name;
    document.getElementById('textViewer').style.display='block';
  });
}
document.getElementById('copyText').addEventListener('click',()=>{
  navigator.clipboard.writeText(document.getElementById('textContent').textContent);
});

// Modal logic
const modal = document.getElementById('modal');
const preview = document.getElementById('previewContainer');
const downloadBtn = document.getElementById('downloadBtn');
const likeBtn = document.getElementById('likeBtn');
let liked = false;

function openModal(type,item){
  preview.innerHTML = '';
  liked = false; likeBtn.textContent = '♡ Like';
  let media;
  if(type==='image'){
    media = document.createElement('img');
    media.src = encodeURI(item.download_url);
  } else {
    media = document.createElement('video');
    media.src = encodeURI(item.download_url);
    media.controls = true;
    media.autoplay = true;
  }
  downloadBtn.href = item.download_url;
  downloadBtn.download = item.name;
  preview.appendChild(media);
  modal.style.display = 'flex';
}

modal.querySelector('.close').addEventListener('click', ()=> modal.style.display='none');
likeBtn.addEventListener('click', ()=>{
  liked = !liked;
  likeBtn.textContent = liked ? '♥ Liked' : '♡ Like';
});
window.addEventListener('click', e => { if(e.target === modal) modal.style.display='none'; });

// Initialize
showMenu();
</script>

<footer>
  <a href="https://mahmoudelsheikh7.github.io/profilecardwebpage-mahmoud/" target="_blank" aria-label="GitHub">
    <svg class="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24" height="24">
      <path d="M12 0.3C5.4 0.3 0 5.7 0 12.3C0 17.6 3.4 22 8.2 23.6C8.8 23.7 9 23.3 9 23V20.9C5.7 21.6 5 19.2 5 19.2C4.5 17.9 3.8 17.5 3.8 17.5C2.8 16.8 3.9 16.8 3.9 16.8C5 16.9 5.6 18 5.6 18C6.6 19.7 8.3 19.2 9 18.9C9.1 18.1 9.4 17.6 9.7 17.3C7.1 17 4.3 16 4.3 11.4C4.3 10.1 4.8 9 5.6 8.1C5.5 7.8 5.1 6.6 5.7 5C5.7 5 6.8 4.7 9 6.1C9.9 5.9 10.9 5.8 12 5.8C13.1 5.8 14.1 5.9 15 6.1C17.2 4.7 18.3 5 18.3 5C18.9 6.6 18.5 7.8 18.4 8.1C19.2 9 19.7 10.1 19.7 11.4C19.7 16 16.9 17 14.3 17.3C14.7 17.7 15 18.4 15 19.5V23C15 23.3 15.2 23.7 15.8 23.6C20.6 22 24 17.6 24 12.3C24 5.7 18.6 0.3 12 0.3Z"/>
    </svg>
  </a>
  <p>© Mahmoud El-Sheikh</p>
</footer>
</body>
</html>
